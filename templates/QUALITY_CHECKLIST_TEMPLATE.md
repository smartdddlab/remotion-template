# 质量检查清单模板

> **项目**: [项目名称]
> **创建日期**: [日期]
> **最后更新**: [日期]
> **检查清单版本**: v1.0

## 🔴 必须检查（强制，8项，自动化执行）

**说明**：这些是项目必须通过的检查项，AI必须执行自动化验证。任何一项失败都必须立即修复。

- [ ] **TypeScript类型检查通过**：运行 `pnpm run typecheck`
  - 验证方法：执行命令，确保无错误输出
  - 失败处理：修复TypeScript错误后才能继续

- [ ] **所有场景使用relativeFrame计算**：检查每个场景组件是否使用 `const relativeFrame = frame - from;`
  - 验证方法：grep检查或AST分析
  - 失败处理：添加相对帧数计算

- [ ] **音频参数正确**：所有音频文件参数符合规范
  - 参数要求：`emotion=neutral`, `speed=1.0`, `language_boost=Chinese`
  - 验证方法：检查生成音频时的参数设置
  - 失败处理：重新生成音频文件

- [ ] **所有visual_hook完整实现**：检查每个场景的visual_hook是否按照`public/plan.yaml`完整实现
  - 验证方法：对比`plan.yaml`中的visual_hook列表与实现代码
  - 失败处理：实现缺失的visual_hook

- [ ] **场景过渡实现**：场景之间的过渡效果符合`plan.yaml`中的`transition_logic`
  - 验证方法：预览检查过渡效果
  - 失败处理：添加或调整过渡效果

- [ ] **主色调符合visual_design_guide**：颜色系统遵循`plan.yaml`中的`visual_design_guide`
  - 验证方法：对比颜色代码
  - 失败处理：调整颜色值

- [ ] **所有interpolate范围在[0, duration]内**：检查interpolate的输入范围不超过场景时长
  - 验证方法：代码审查interpolate调用
  - 失败处理：调整interpolate范围

- [ ] **视频时长与音频一致**：最终视频时长与音频总时长的误差≤0.1秒
  - 验证方法：使用`ffprobe`检查时长
  - 计算公式：`|视频时长 - 音频总时长| ≤ 0.1`
  - 失败处理：调整场景时长或重新渲染

## 🟡 推荐检查（质量保证，15项）

**说明**：这些是推荐的质量检查项，能显著提升视频质量。AI应该尽量执行这些检查。

- [ ] **动画流畅度30fps**：动画运行在30帧/秒，无卡顿
  - 验证方法：使用Chrome DevTools Performance工具检查帧率
  - 优化建议：减少DOM节点，使用will-change

- [ ] **场景情感基调符合plan.yaml**：每个场景的情感表现符合`plan.yaml`中的情感描述
  - 场景1：playful（活泼有趣）
  - 场景2：professional（专业科学）
  - 场景3：suspense（紧张震撼）
  - 场景4：inspiring（启发认知）

- [ ] **字体字号符合规范**：文字排版遵循`plan.yaml`中的`visual_design_guide`
  - 检查项：字体族、字号、行高、字重
  - 优化建议：使用设计令牌中的字体定义

- [ ] **代码有必要的注释**：关键代码有注释说明意图
  - 检查点：relativeFrame计算、interpolate参数、复杂动画逻辑
  - 建议：添加解释性的注释，而不是描述性注释

- [ ] **图像格式优化为WebP**：所有生成的图像使用WebP格式
  - 检查方法：`find public/images -type f ! -name "*.webp"`
  - 优化工具：使用`baoyu-compress-image`技能优化

- [ ] **音频语速3.5-4.1字/秒**：音频语速在合理范围内
  - 计算方法：总字数 / 音频时长（秒）
  - 优化：调整音频生成时的speed参数

- [ ] **使用Remotion Canvas粒子系统（如需）**：当需要粒子效果时使用Canvas而非DOM
  - 适用场景：静电粒子、气泡爆炸、烟雾效果
  - 性能优势：Canvas性能优于大量DOM节点

- [ ] **使用Three.js 3D模型（如需）**：当需要3D效果时使用Three.js
  - 适用场景：口腔共鸣腔、糖粒结构、3D图表
  - 实现参考：参考`remotion-best-practices` skill中的3D规则

- [ ] **代码结构清晰**：代码组织合理，职责单一
  - 检查点：组件拆分合理、函数职责明确、文件结构清晰
  - 重构建议：过大组件拆分为子组件

- [ ] **图像风格符合visual_aesthetic**：生成的图像风格与`plan.yaml`中的`visual_aesthetic`一致
  - 风格匹配：参考AGENTS.md中的baoyu-skills风格匹配指南
  - 调整方法：重新生成或使用图像处理工具调整

- [ ] **文件路径正确**：所有资源引用路径正确
  - 检查点：音频文件引用、图像文件引用、外部资源引用
  - 验证方法：运行时检查404错误

- [ ] **音频同步正确**：音频与视频内容同步
  - 检查方法：预览时检查音频与画面匹配
  - 调整方法：调整Sequence的from参数

- [ ] **使用baoyu-skills生成高质量图像**：需要特定风格插画时使用baoyu-skills
  - 适用情况：复杂场景插图、角色物品特写、信息图、封面图
  - 技能选择：根据visual_aesthetic选择对应的baoyu-skill

- [ ] **图像在public/images/目录**：生成的图像文件存放在统一目录
  - 目录结构：`public/images/场景名称/图像文件.webp`
  - 优势：便于管理和引用

- [ ] **文档更新及时**：相关文档随开发更新
  - 检查点：IMPLEMENTATION_PLAN.md、代码注释、项目经验记录
  - 建议：开发完成后立即更新文档

## 🟢 可选检查（高级优化，10项）

**说明**：这些是高级优化检查项，适用于追求极致质量或特殊效果的项目。

- [ ] **使用Lottie复杂交互动画**：实现复杂交互动画效果
  - 适用场景：按钮交互、复杂图标动画、微交互
  - 实现方法：导入Lottie JSON文件，使用`@remotion/lottie`

- [ ] **实现复杂的interpolate组合**：多层interpolate组合实现复杂动画
  - 技术点：interpolate嵌套、easing函数组合、时间轴控制
  - 效果示例：弹性动画、缓入缓出、弹簧效果

- [ ] **SVG路径动画精确**：使用SVG路径动画实现精确的图形动画
  - 适用场景：图标变形、路径绘制、复杂图形动画
  - 实现方法：SVG `<path>` + `stroke-dasharray`动画

- [ ] **性能优化（DOM节点<100）**：控制DOM节点数量提升性能
  - 检查方法：Chrome DevTools Elements面板统计节点数
  - 优化方法：使用Canvas替代大量相似元素

- [ ] **使用React.memo优化渲染**：对纯展示组件使用React.memo
  - 适用组件：静态内容、不依赖帧数变化的元素
  - 优化效果：减少不必要的重新渲染

- [ ] **添加will-change属性**：提示浏览器优化动画性能
  - 适用属性：`transform`, `opacity`
  - 使用方式：`style={{ willChange: 'transform, opacity' }}`

- [ ] **实现视差效果**：多层滚动视差效果
  - 实现方法：不同层级使用不同的滚动速度
  - 视觉效果：深度感和沉浸感

- [ ] **使用专业音效设计**：添加音效增强视频表现力
  - 音效类型：转场音效、强调音效、环境音效
  - 实现方法：使用`<Audio>`组件叠加音效

- [ ] **实现多层混合合成**：多层视频合成实现复杂效果
  - 技术点：使用多个Sequence，混合模式，透明度控制
  - 效果示例：叠加、变暗、变亮、颜色减淡

- [ ] **自动化检查脚本开发**：开发自定义自动化检查脚本
  - 检查项：相对帧数使用、音频参数、文件存在性
  - 集成：添加到package.json scripts中

## 📊 检查状态追踪

### 检查统计
- **总检查项**: 33项 (8必须 + 15推荐 + 10可选)
- **已完成**: [数字] 项
- **待完成**: [数字] 项  
- **完成率**: [百分比]%

### 检查历史
| 检查时间 | 检查类型 | 通过项数 | 失败项数 | 检查人 |
|---------|---------|---------|---------|--------|
| [日期] | 必须检查 | [数字] | [数字] | AI |
| [日期] | 完整检查 | [数字] | [数字] | AI |

### 自动化验证状态
- [ ] TypeScript类型检查：自动执行 (`pnpm run typecheck`)
- [ ] 文件存在性检查：脚本实现中
- [ ] 视频时长验证：脚本实现中
- [ ] 相对帧数检查：脚本实现中

## 🔗 相关文档
- [AGENTS.md](../AGENTS.md) - 主流程文档
- [TECH_GUIDE.md](../TECH_GUIDE.md) - 技术指南
- [IMPLEMENTATION_PLAN_TEMPLATE.md](./IMPLEMENTATION_PLAN_TEMPLATE.md) - 方案设计模板
- [PROJECT_LESSONS_TEMPLATE.md](./PROJECT_LESSONS_TEMPLATE.md) - 项目经验模板

---
**模板版本**: v1.0  
**创建日期**: 2026-01-28  
**更新建议**: 根据项目实际情况调整检查项和验证方法