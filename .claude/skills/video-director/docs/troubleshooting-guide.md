## 常见问题与解决方案

### 脚本问题
| 问题 | 解决方案 |
|-------|----------|
| 模糊的视觉描述 | 使用4元素结构：构图、主体、背景、效果。具体说明角度、运动和细节。 |
| 过于复杂的场景 | 分解为多个更简单的场景。每个场景应专注于一个主要概念。 |
| 时间不匹配 | 根据旁白速度重新计算时间码（清晰的教育内容约每分钟150词）。 |
| 不一致的基调 | 确保情绪与教育水平和主题匹配。在整个视频中保持一致的情感基调。 |
| 旁白薄弱 | 使用清晰、易懂的语言。通过停顿控制节奏以突出重点。突出关键信息。 |

### 音频生成问题
| 问题 | 解决方案 |
|-------|----------|
| 语速不一致 | 所有场景始终使用 speed=1.0。永远不要使用 0.5-0.9。 |
| 文本长度不匹配 | 使用公式计算目标词数：目标词数 = 时长 × 3.8。调整文本使其在±5%范围内。 |
| 场景间速度差异大 | 验证所有场景使用相同的 speed 参数。如果差异>10%，重新生成。 |
| 快慢交替感知 | 确保所有场景的语速在每秒 3.5-4.1 个字符范围内。 |
| 语速超出范围 | 使用 speed=1.0 重新生成或调整文本长度。目标：3.5-4.1 字符/秒。 |

### AI 提示词问题
| 问题 | 解决方案 |
|-------|----------|
| 缺失提示词元素 | 确保包含全部 7 个元素：构图、主体、风格、光照、色彩、背景、效果。 |
| 描述过于笼统 | 要具体："电影级广角镜头"而非"广角镜头"；"戏剧性侧光"而非"良好光照"。 |
| 风格不一致 | 选择一个主要风格（电影感、超写实、极简主义），并在所有提示词中保持一致。 |
| 配色方案问题 | 选择与场景氛围相匹配的色彩：神秘用冷色调蓝色，友好内容用暖色调。 |
| 忽视背景 | 描述能够支撑主体和氛围的环境细节。 |

### 制作问题
| 问题 | 解决方案 |
|-------|----------|
| 音频规格不完整 | 涵盖全部 4 个方面：音乐风格、音效、配音要求、环境音。 |
| 转场模糊 | 指定确切的转场类型："从黑色淡入"、"匹配剪辑到特写"、"向左推进入下一场景"。 |
| 情绪指导缺失 | 提供具体的表演指导："创造惊奇感"、"建立紧张感"、"保持吸引人的节奏"。 |
| 忽视技术限制 | 考虑复杂视觉效果和音频同步要求的渲染限制。 |
| 平台优化 | 为目标平台（B站、YouTube、TikTok 等）调整宽高比、时长和内容密度。 |

### 模板结构问题
| 问题 | 解决方案 |
|-------|----------|
| YAML 格式错误 | 保持正确的缩进（每级 2 个空格）。对多行字符串使用 `|`。 |
| 场景数量不匹配 | 确保脚本场景、镜头提示词和制作说明有对应的条目。 |
| 时间码逻辑错误 | 验证时间码是连续的，且总时长与指定长度匹配。 |
| 可选模块混淆 | advanced_specs 模块是可选的 - 仅在特定制作需求需要时才包含。 |
| 字段填写 | 在使用模板之前，用具体内容填写所有占位符字段（"请输入..."）。 |

## 从单调到杰作：视觉设计升级指南

### 问题所在
你一直在创建结构良好但视觉设计单调的视频——黑/蓝背景、通用构图、缺乏艺术感。本指南帮助你将模板转化为视觉震撼的杰作。

### 快速升级清单

#### 阶段1：审计当前模板
- [ ] **识别视觉弱点**：列出具有通用背景、对比度差或构图弱的场景
- [ ] **色彩分析**：记录当前色彩使用情况（可能是黑/蓝主导）
- [ ] **风格一致性**：检查场景是否具有连贯的视觉语言
- [ ] **运动审查**：评估动画曲线和时序

#### 阶段2：定义视觉策略
- [ ] **选择主风格**：电影感/超写实/扁平设计/矢量插画/极简主义
- [ ] **创建色彩策略**：定义具有情感映射的主色/次色调板
- [ ] **建立构图原则**：三分法、引导线、视觉层次
- [ ] **定义运动语言**：缓动曲线、时序模式、舞台调度方法
- [ ] **设置排版标准**：字体选择、字号层次、文本动画

#### 阶段3：升级模板
1. **添加 visual_design_guide 部分**（如更新后的模板所示）
2. **修改 shot_prompts** 以引用视觉设计原则
3. **更新 production_notes** 添加视觉特定指导
4. **增强脚本视觉描述** 添加构图细节

#### 阶段4：技术实现
- **背景**：用渐变、纹理或动态背景替换纯色
- **色彩应用**：在整个组件中一致使用定义的调色板
- **动画细化**：应用 motion_design 中的缓动曲线和时序
- **排版实现**：遵循字体层次和文本动画模式

### 常见升级模式

#### 从黑色背景到动态环境
- **替换为**：`backgroundColor: "black"`
- **尝试**：
  ```typescript
  background: `linear-gradient(135deg, ${colors.primary} 0%, ${colors.secondary} 100%)`
  ```
  或使用动画渐变、粒子系统或纹理叠加

#### 从单色到策略性色彩
- **替换为**：单一色彩主导
- **尝试**：具有情感映射的互补调色板
  - 青色 (#00bfff) 代表好奇/科技
  - 橙色 (#ff6b35) 代表能量/注意力
  - 深蓝色 (#001f3f) 代表深度/严肃

#### 从静态到动态构图
- **替换为**：空背景上的居中元素
- **尝试**：使用分层元素的三分法布局
  - 前景：带有视差的主主体
  - 中景：上下文元素
  - 背景：带有微妙运动的大气元素

#### 从基础到高级动画
- **替换为**：线性插值
- **尝试**：弹簧动画用于能量，ease-in-out 用于平滑
  ```typescript
  const scale = spring({ frame, fps: 30, config: { damping: 20 } })
  ```

### 示例转换：倒计时视频

**升级前（单调）**：
- 黑色背景，蓝色发光文字
- 居中构图
- 基础缩放动画

**升级后（视觉丰富）**：
- 动画渐变背景（青色到深蓝）
- 文字放置在三分法交叉点
- 带有过冲的弹簧动画
- 从数字发射的粒子系统
- 微妙的色差效果
- 随倒计时响应的动态光照

### 维护技巧
- **视觉风格指南**：发现有效方法时保持更新
- **组件库**：构建可复用的样式组件以确保一致性
- **定期审计**：每季度审查视频的视觉连贯性
- **反馈循环**：与目标受众测试视觉理解度

## 风格系统故障排除

增强的风格系统（v5.2+）引入了智能风格处理，包括置信度计算、冲突解决和模糊风格澄清。以下是常见问题及解决方案：

### 置信度计算问题
| 问题 | 解决方案 |
|-------|----------|
| **低置信度分数 (<50%)** | 系统无法自动决定风格。必须要求用户明确指定风格。 |
| **跨维度置信度不一致** | 检查 keyword_match (40%)、content_relevance (25%)、emotion_alignment (20%)、video_type_fit (15%) 权重。 |
| **高置信度但风格错误** | 验证内容分析：主题、情感基调、视频类型。如需要调整权重。 |

### 风格冲突解决
| 问题 | 解决方案 |
|-------|----------|
| **文化-时代冲突**（如：中国风 + 赛博朋克） | 使用优先级：cultural_style > era_style > genre_style。保留文化风格，调整时代/流派风格。 |
| **时代-流派冲突**（如：古典 + 蒸汽波） | 分析内容深度：浅层内容 → 简单风格，深层内容 → 复杂风格。 |
| **流派-内容冲突**（如：极简主义 + 复杂主题） | 根据内容深度和目标受众调整风格复杂度。 |
| **检测到多重冲突** | 首先解决关键冲突，然后主要冲突，再中等冲突，最后轻微冲突。 |

### 模糊风格处理问题
| 问题 | 解决方案 |
|-------|----------|
| **用户说"酷炫"或"现代"** | 必须澄清：提供 2-3 种具体风格选项（例如："您是指赛博朋克科技还是现代极简主义？"） |
| **用户说"专业"或"有创意"** | 要求提供视觉示例或描述具体的视觉特征。 |
| **用户拒绝澄清** | 无法继续。停止并解释："我需要具体的风格来创建一致的视觉设计。" |
| **模糊术语不在词典中** | 要求用户描述视觉特征：色彩、形状、情绪、文化参考。 |

### Baoyu-Skills 映射问题
| 问题 | 解决方案 |
|-------|----------|
| **风格未映射到 Baoyu-skill** | 检查 `style-knowledge-base.md` 中的正确映射。如需要添加缺失的映射。 |
| **Baoyu 参数不正确** | 验证 `style-knowledge-base.md` 中的参数映射表。 |
| **Baoyu-skill 不可用** | 使用 `style-knowledge-base.md` 回退表中的替代技能映射。 |
| **生成图像与风格不匹配** | 检查 Baoyu-skill 参数并调整 style_weight、color_palette、visual_elements。 |

### 风格定义验证
| 问题 | 解决方案 |
|-------|----------|
| **缺少必填字段** | `style_definition` 必须至少包含以下之一：cultural_style、era_style、genre_style |
| **无效的风格值** | 检查 `style-knowledge-base.md` 中的允许值：cultural_style（7个值）、era_style（5个）、genre_style（7个） |
| **缺少风格理由** | 始终包含 `style_rationale` 以解释为什么此风格适合内容 |
| **向后兼容性问题** | 旧的 `visual_aesthetic` 字段仍然有效。系统会将其映射到新风格系统。 |

### 自动映射问题
| 问题 | 解决方案 |
|-------|----------|
| **色彩映射不正确** | 检查 `style-knowledge-base.md` 中每种风格的调色板映射 |
| **排版映射错误** | 验证 `style-knowledge-base.md` 中的字体映射表 |
| **运动设计未应用** | 检查知识库中每种风格的运动设计映射 |
| **视觉元素缺失** | 确保 visual_elements 映射包含风格所需的所有图案元素 |

### 用户体验问题
| 问题 | 解决方案 |
|-------|----------|
| **澄清问题太多** | 批量提问：同时询问视觉、情感、功能维度 |
| **用户对风格选项感到困惑** | 为每个选项提供视觉示例或描述 |
| **风格推荐看起来随机** | 解释原因："根据您关于[主题]的内容，我推荐[风格]，因为[原因]" |
| **用户想要系统中没有的自定义风格** | 提供最接近的现有风格，或记录新风格以供将来添加 |

### 性能问题
| 问题 | 解决方案 |
|-------|----------|
| **风格计算太慢** | 缓存相似内容的风格分析结果 |
| **冲突检测开销大** | 预先计算常见冲突模式 |
| **Baoyu-skill 映射慢** | 缓存映射结果 |

### 何时寻求额外帮助
- 复杂 3D 可视化
- 高级动态图形
- 品牌识别集成
- 可访问性要求（色彩对比度、运动敏感度）

