# é«˜å¯ç”¨ Remotion è§†é¢‘åˆ¶ä½œ

<!-- AIå¼€å‘æ‰‹å†Œ: æ€ç»´çº¦æŸ + å·¥ä½œæµç¨‹ + æŠ€æœ¯è§„åˆ™ -->

## ğŸ§  AIæ€ç»´çº¦æŸ

### æ ¸å¿ƒåŸåˆ™ï¼šä¸è¦å¼±æ™ºæ€è€ƒ
1. **ä¸è€ƒè™‘æŠ€æœ¯èƒ½åŠ›**ï¼šç›´æ¥å®ç°æ‰€æœ‰æŠ€æœ¯éœ€æ±‚ï¼ˆç²’å­ç³»ç»Ÿã€Three.jsã€Lottieã€Canvasï¼‰
2. **ä¸è€ƒè™‘æ—¶é—´çº¦æŸ**ï¼šè´¨é‡ä¼˜å…ˆï¼Œä¸€æ­¥åˆ°ä½å®ç°æ‰€æœ‰è§†è§‰è¦æ±‚
3. **ç´ æé—®é¢˜å·²è§£å†³**ï¼šéœ€è¦æ–°å›¾åƒæ—¶ç«‹å³ç”¨baoyu-skillsç”Ÿæˆï¼ŒæŒ‰`visual_aesthetic`è‡ªåŠ¨åŒ¹é…é£æ ¼
4. **ä¸€æ­¥åˆ°ä½å®Œæ•´å®ç°**ï¼šä¸¥æ ¼æŒ‰`public/plan.yaml`çš„`visual_direction`å®ç°ï¼Œä¸å…è®¸ç®€åŒ–/æ›¿ä»£/å»¶å
5. **å¼€å‘ç¡®è®¤æœºåˆ¶**ï¼šæ–¹æ¡ˆå®Œæˆåç¡®è®¤ä¸€æ¬¡ï¼Œå«baoyu-skillsç´ æéœ€è¯´æ˜
6. **å¼ºåˆ¶è´¨é‡æ£€æŸ¥**ï¼šå¿…é¡»è¿è¡Œ`pnpm run lint`ï¼Œç»ä¸è·³è¿‡

### å¼ºåˆ¶è§„åˆ™
1. **Confidence Check è‡ªåŠ¨è§¦å‘**ï¼šä»»ä½•å®ç°ä»»åŠ¡å¼€å§‹å‰ï¼Œå¿…é¡»è‡ªåŠ¨åŠ è½½ Confidence Check skill
2. **plan.yaml å¼ºåˆ¶å¯¹ç…§**ï¼šå¼€å‘æ¯ä¸ªåœºæ™¯å‰å¿…é¡»é˜…è¯»å¹¶å¯¹ç…§ `public/plan.yaml`ï¼Œç¡®ä¿ `visual_direction` å®Œæ•´å®ç°
3. **è§¦å‘æ—¶æœº**ï¼šè§†é¢‘è§„åˆ’å®Œæˆã€åˆ›å»ºå®ç°æ–¹æ¡ˆã€å¼€å§‹ä»£ç ç¼–å†™å‰
4. **éªŒè¯è¦æ±‚**ï¼šå¿…é¡»è¾¾åˆ° 90% ä»¥ä¸Šç½®ä¿¡åº¦æ‰èƒ½ç»§ç»­å®ç°
5. **ä½¿ç”¨ TODO**ï¼šç¡®ä¿ä»»åŠ¡æ¸…æ™°ã€å¯è¿½è¸ª

### baoyu-skills é£æ ¼åŒ¹é…

baoyu-danger-gemini-web :ä¸ Gemini Web äº¤äº’ï¼Œç”Ÿæˆæ–‡æœ¬å’Œå›¾ç‰‡,æ²¡æœ‰å›¾åƒç”Ÿæˆ API keyä½¿ç”¨æ­¤æ–¹æ¡ˆ

| visual_aesthetic | æ¨èæŠ€èƒ½ | æ¨èé£æ ¼ |
|-----------------|---------|---------|
| illustrative with tech elements | baoyu-article-illustrator | tech/editorial/blueprint |
| scientific visualization | baoyu-infographic | technical-schematic/scientific |
| playful cartoon | baoyu-comic | vibrant/playful/classic |
| professional corporate | baoyu-infographic | corporate/clean/bold-graphic |
| educational tutorial | baoyu-article-illustrator | chalkboard/sketch-notes/warm |
| magazine editorial | baoyu-infographic | editorial-infographic/bold-graphic |
| | ä½¿ç”¨ TODOã€å¯è¿½è¸ª* |

### Remotion èƒ½åŠ›ä½¿ç”¨
**å¿…é¡»ä½¿ç”¨**ï¼šCanvasç²’å­ç³»ç»Ÿã€Three.js 3Dã€LottieåŠ¨ç”»ã€SVGåŠ¨ç”»ã€å¤æ‚interpolateç»„åˆ

**ç¦æ­¢æ€è€ƒ**ï¼šâŒ"æˆ‘ä¸ä¼š" âŒ"ç®€åŒ–å§" âŒ"æ—¶é—´ä¸å¤Ÿ" âŒ"ç´ æä¸å¥½è·å–"

---

## ğŸ”„ è§†é¢‘åˆ¶ä½œæµç¨‹ - always use todo

### ç¬¬1æ­¥ï¼šè§†é¢‘è§„åˆ’
- ä½¿ç”¨ AI å¯¹è¯è§„åˆ’è§†é¢‘å†…å®¹ï¼Œç”Ÿæˆ `public/plan.yaml`
- å®¡æ ¸è¦ç‚¹ï¼šç”»é¢æŒ‡å¯¼æ˜ç¡®ã€éŸ³é¢‘æŒ‡å¯¼å«å€ç‡ã€ç»“æ„æ¸…æ™°ã€æ—¶é•¿åˆç†

### ç¬¬2æ­¥ï¼šå¼€å‘æ–¹æ¡ˆç¡®è®¤ï¼ˆå¼ºåˆ¶ï¼‰
**è¦æ±‚**ï¼šåˆ†æå›¾åƒç´ æéœ€æ±‚å’ŒRemotionæŠ€æœ¯æ–¹æ¡ˆï¼Œç”¨æˆ·ç¡®è®¤åæ‰èƒ½å¼€å‘

### ç¬¬3æ­¥ï¼šéŸ³é¢‘ç”Ÿæˆ
- ä½¿ç”¨minimax-mcpç”Ÿæˆåœºæ™¯éŸ³é¢‘
- å‚æ•°ï¼š`speed=1.0`, `emotion=neutral`, `language_boost=Chinese`
- éªŒè¯ï¼šè¯­é€Ÿ3.5-4.1å­—/ç§’ï¼Œæ—¶é•¿åå·®<10%

### ç¬¬4æ­¥ï¼šRemotion è§†é¢‘å¼€å‘ï¼ˆå¼ºåˆ¶é€åœºæ™¯å¯¹ç…§ï¼‰
**æ ¸å¿ƒåŸåˆ™**ï¼šé€è¡Œå¯¹ç…§ `public/plan.yaml`ï¼Œç¡®ä¿æ¯ä¸ª `visual_direction` éƒ½è¢«å®Œæ•´å®ç°

**å¼€å‘æ—¶å¼ºåˆ¶è§„åˆ™**ï¼š
- æ¯ä¸ªåœºæ™¯ç»„ä»¶å¿…é¡»è®¡ç®— `const relativeFrame = frame - from;`
- æ‰€æœ‰ `interpolate` è¾“å…¥èŒƒå›´å¿…é¡»åœ¨ `[0, durationInFrames]` å†…
- `visual_direction` æè¿°å¿…é¡»100%å®ç°ï¼Œä¸å…è®¸ç®€åŒ–/æ›¿ä»£/å»¶å
- éŸ³é¢‘æ—¶é•¿å¿…é¡»åŒ¹é… `duration` å­—æ®µï¼ˆè¯¯å·®â‰¤0.1ç§’ï¼‰

**å¼€å‘åè‡ªæ£€**ï¼š
```
â–¡ æ£€æŸ¥ visual_direction å®ç°å®Œæ•´åº¦
â–¡ éªŒè¯ relativeFrame è®¡ç®—æ­£ç¡®
â–¡ éªŒè¯ interpolate èŒƒå›´æ— æº¢å‡º
â–¡ ç¡®è®¤æ—  TypeScript é”™è¯¯ï¼ˆè¿è¡Œ pnpm run lintï¼‰
â–¡ å¯¹æ¯” plan.yaml ç¡®è®¤æ— é—æ¼
```

### ç¬¬5æ­¥ï¼šé¢„è§ˆéªŒè¯ï¼ˆå¼ºåˆ¶æ£€æŸ¥ç‚¹ï¼‰
**è¿è¡Œé¢„è§ˆ**ï¼š`pnpm run dev`

**éªŒè¯æ¸…å•**ï¼š
1. **ç”»é¢ä¸€è‡´æ€§**ï¼šé¢„è§ˆæ•ˆæœä¸ `visual_direction` æè¿°ä¸€è‡´
2. **åŠ¨ç”»æ­£ç¡®æ€§**ï¼šæ£€æŸ¥æ—  NaNã€æ— è·³å˜ã€æ— æº¢å‡º
3. **éŸ³é¢‘åŒæ­¥**ï¼šéŸ³é¢‘æ’­æ”¾ä¸ç”»é¢åˆ‡æ¢æ—¶é—´åŒ¹é…
4. **æ—¶é•¿å‡†ç¡®æ€§**ï¼šåœºæ™¯æ—¶é•¿ä¸ `plan.yaml` ä¸€è‡´
5. **è§†è§‰å®Œæ•´æ€§**ï¼šæ‰€æœ‰ç´ ææ­£ç¡®åŠ è½½ï¼Œæ— ç¼ºå¤±

### ç¬¬6æ­¥ï¼šæ¸²æŸ“è¾“å‡ºä¸æœ€ç»ˆéªŒè¯
```bash
pnpm run render
```

**è¾“å‡ºéªŒè¯**ï¼š
- è¾“å‡ºè·¯å¾„ï¼š`output/video.mp4`
- è§†é¢‘æ—¶é•¿ = éŸ³é¢‘æ€»æ—¶é•¿ï¼ˆè¯¯å·®â‰¤0.1ç§’ï¼‰
- åˆ†è¾¨ç‡ï¼š1920x1080ï¼Œå¸§ç‡ï¼š30fps

---

## âš¡ æŠ€æœ¯è§„åˆ™

### è§„åˆ™1ï¼šç›¸å¯¹å¸§æ•°è®¡ç®—ï¼ˆå…³é”®ï¼‰
**å¿…é¡»**ï¼šåœ¨Sequenceç»„ä»¶å†…ï¼Œç»„ä»¶å¼€å¤´ç«‹å³è®¡ç®— `const relativeFrame = frame - from;`

**æ‰€æœ‰interpolateä½¿ç”¨ç›¸å¯¹å¸§æ•°**ï¼š
```tsx
const opacity = interpolate(relativeFrame, [0, 10, duration - 10, duration], [0, 1, 1, 0]);
```

**åµŒå¥—åŠ¨ç”»ä¹Ÿä½¿ç”¨ç›¸å¯¹å¸§æ•°**ï¼š
```tsx
{[0, 1, 2, 3, 4].map((index) => {
  const bubbleScale = interpolate(
    relativeFrame,  // âœ… ä½¿ç”¨ç›¸å¯¹å¸§æ•°
    [30 + index * 15, 60 + index * 15],
    [0, 1]
  );
  return <div key={index} style={{ transform: `scale(${bubbleScale})` }} />;
})}
```

### è§„åˆ™2ï¼šinterpolateèŒƒå›´éªŒè¯
- è¾“å…¥èŒƒå›´å¿…é¡»åœ¨`[0, duration]`å†…
- åœºæ™¯ç»“æŸæ—¶opacityä¸åº”ä¸º0ï¼ˆé™¤éæœ‰æ„fade outï¼‰

### è§„åˆ™3ï¼šéŸ³é¢‘å‚æ•°ç»Ÿä¸€
æ‰€æœ‰åœºæ™¯å¿…é¡»ä½¿ç”¨ç›¸åŒå‚æ•°ï¼š
```bash
MiniMax-mcp_text_to_audio(
  text="åœºæ™¯æ–‡æœ¬",
  voice_id="female-shaonv",
  emotion="neutral",  // âœ… ä¸¥æ ¼ç»Ÿä¸€
  speed=1.0,
  language_boost="Chinese"
)
```

---

## ğŸš¨ å¸¸è§é™·é˜±

| é™·é˜± | ç—‡çŠ¶ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| ç›¸å¯¹å¸§æ•°é”™è¯¯ | åç»§åœºæ™¯ä¸å¯è§ã€åµŒå¥—åŠ¨ç”»æ— æ•ˆ | ä½¿ç”¨ `const relativeFrame = frame - from;` |
| interpolateæº¢å‡º | åŠ¨ç”»è·³å˜ã€NaN | ç¡®ä¿èŒƒå›´åœ¨ `[0, duration]` å†… |
| éŸ³é¢‘å‚æ•°ä¸ä¸€è‡´ | è¯­è°ƒæƒ…æ„Ÿä¸è¿è´¯ | ç»Ÿä¸€ä½¿ç”¨ `emotion=neutral, speed=1.0` |
| æ²¡æœ‰å›¾åƒç”Ÿæˆ API key
 | æ— æ³•ç”Ÿæˆå›¾ç‰‡ | ä½¿ç”¨ baoyu-danger-gemini-web :ä¸ Gemini Web äº¤äº’ï¼Œç”Ÿæˆæ–‡æœ¬å’Œå›¾ç‰‡ |

---

## âœ… è´¨é‡æ£€æŸ¥æ¸…å•

- [ ] **TypeScriptç±»å‹æ£€æŸ¥é€šè¿‡**ï¼šè¿è¡Œ `pnpm run lint`
- [ ] **æ‰€æœ‰åœºæ™¯ä½¿ç”¨relativeFrameè®¡ç®—**ï¼šæ£€æŸ¥ `const relativeFrame = frame - from;`
- [ ] **éŸ³é¢‘å‚æ•°æ­£ç¡®**ï¼š`emotion=neutral`, `speed=1.0`, `language_boost=Chinese`
- [ ] **æ‰€æœ‰visual_directionå®Œæ•´å®ç°**ï¼šå¯¹ç…§`public/plan.yaml`éªŒè¯
- [ ] **åœºæ™¯è¿‡æ¸¡å®ç°**ï¼šç¬¦åˆ`plan.yaml`ä¸­çš„`transition_logic`
- [ ] **ä¸»è‰²è°ƒç¬¦åˆè®¾è®¡**ï¼šéµå¾ª`plan.yaml`ä¸­çš„`visual_design_guide`
- [ ] **æ‰€æœ‰interpolateèŒƒå›´åœ¨[0, duration]å†…**ï¼šæ— æº¢å‡º
- [ ] **è§†é¢‘æ—¶é•¿ä¸éŸ³é¢‘ä¸€è‡´**ï¼šè¯¯å·®â‰¤0.1ç§’

---

## ğŸ“¦ å¿«é€Ÿå‚è€ƒ

### æ ¸å¿ƒå‘½ä»¤
```bash
# éŸ³é¢‘ç”Ÿæˆ
MiniMax-mcp_text_to_audio(text="åœºæ™¯æ–‡æœ¬", voice_id="female-shaonv", emotion="neutral", speed=1.0, language_boost="Chinese")

# å›¾åƒç”Ÿæˆ
baoyu-article-illustrator content.md --style tech
baoyu-infographic content.md --layout funnel --style technical-schematic

# å¼€å‘éªŒè¯
pnpm run dev    # é¢„è§ˆ
pnpm run render # æ¸²æŸ“
```

### ä»£ç æ¨¡æ¿
```tsx
import { useCurrentFrame, interpolate, Sequence, AbsoluteFill } from 'remotion';

interface SceneProps {
  from: number;
  durationInFrames: number;
}

export const SceneTemplate: React.FC<SceneProps> = ({ from, durationInFrames }) => {
  const frame = useCurrentFrame();
  const relativeFrame = frame - from;  // âš¡ å…³é”®ï¼šè®¡ç®—ç›¸å¯¹å¸§æ•°
  
  const opacity = interpolate(
    relativeFrame, 
    [0, 10, durationInFrames - 10, durationInFrames], 
    [0, 1, 1, 0]
  );
  
  return (
    <Sequence from={from} durationInFrames={durationInFrames}>
      <AbsoluteFill style={{ opacity }}>
        {/* åœºæ™¯å†…å®¹ */}
      </AbsoluteFill>
    </Sequence>
  );
};
```

---

## âš ï¸ é‡è¦æé†’
1. **ä¸è¦å¼±æ™ºæ€è€ƒï¼Œç›´æ¥å¹²**
2. **ä¸€æ­¥åˆ°ä½å®Œæ•´å®ç°**
3. **å¼ºåˆ¶è´¨é‡æ£€æŸ¥ï¼Œä¸è·³è¿‡lint**
4. **ä¸¥æ ¼å¯¹ç…§plan.yamlå¼€å‘**

---
